<?php

use yii\db\Migration;

class m260128_105206_insert_40_books extends Migration
{
    public function safeUp()
    {
        $time = time();

        $books = [
            ['Война и мир', 2014, 'Эпопея о судьбах русских дворян в годы Наполеоновских войн', '978-5-17-118366-0', '/uploads/covers/2.jpg'],
            ['Преступление и наказание', 2013, 'Роман о моральных терзаниях Раскольникова', '978-5-17-084145-0', '/uploads/covers/3.jpg'],
            ['Анна Каренина', 2014, 'Трагическая история любви Анны Карениной', '978-5-17-079938-0', '/uploads/covers/1.jpg'],
            ['Идиот', 2013, 'Роман о судьбах князя Мышкина', '978-5-17-073351-0', '/uploads/covers/2.jpg'],
            ['Братья Карамазовы', 2013, 'Философский роман о семье Карамазовых', '978-5-17-078126-0', '/uploads/covers/2.jpg'],
            ['Мастер и Маргарита', 2012, 'Сатирический роман о дьяволе в Москве', '978-5-17-073983-0', '/uploads/covers/2.jpg'],
            ['Доктор Живаго', 2012, 'Роман о судьбах людей во времена революции', '978-5-17-070345-0', '/uploads/covers/2.jpg'],
            ['Собор Парижской Богоматери', 2012, 'История любви и трагедии в Париже', '978-5-17-084842-0', '/uploads/covers/2.jpg'],
            ['Дон Кихот', 2012, 'Роман о приключениях рыцаря Дон Кихота', '978-5-17-083214-0', '/uploads/covers/2.jpg'],
            ['Гордость и предубеждение', 2012, 'Роман о любви и социальных отношениях', '978-5-17-086765-0', '/uploads/covers/2.jpg'],
            ['Гамлет', 2005, 'Трагедия о датском принце', '978-5-17-086342-0', '/uploads/covers/2.jpg'],
            ['Отцы и дети', 2005, 'Роман о поколениях и нигилизме', '978-5-17-078312-0', '/uploads/covers/2.jpg'],
            ['Моби Дик', 2005, 'Приключенческий роман о китобое', '978-5-17-080135-0', '/uploads/covers/2.jpg'],
            ['1984', 2005, 'Антиутопия Джорджа Оруэлла', '978-5-17-081348-0', '/uploads/covers/2.jpg'],
            ['Хоббит', 2002, 'Приключения Бильбо Бэггинса', '978-5-17-083214-1', '/uploads/covers/2.jpg'],
            ['Властелин колец', 2001, 'Эпическая сага о Средиземье', '978-5-17-083214-2', '/uploads/covers/2.jpg'],
            ['Улисс', 2001, 'Роман Джеймса Джойса', '978-5-17-083214-3', '/uploads/covers/2.jpg'],
            ['Грозовой перевал', 2001, 'Трагическая история любви Хитклиффа и Кэтрин', '978-5-17-083214-4', '/uploads/covers/2.jpg'],
            ['Лолита', 2001, 'Скандальный роман Владимира Набокова', '978-5-17-083214-5', '/uploads/covers/2.jpg'],
            ['Маленький принц', 2001, 'Философская сказка Антуана де Сент-Экзюпери', '978-5-17-083214-6', '/uploads/covers/1.jpg'],
            ['Книга 21', 2001, 'Современный триллер о журналисте, который раскрывает темные тайны города', '978-5-17-000021-0', '/uploads/covers/1.jpg'],
            ['Книга 22', 2002, 'Роман о поиске себя и смысла жизни в большом мегаполисе', '978-5-17-000022-0', '/uploads/covers/2.jpg'],
            ['Книга 23', 2003, 'Фантастическая сага о путешествиях в параллельные миры', '978-5-17-000023-0', '/uploads/covers/3.jpg'],
            ['Книга 24', 2004, 'История о дружбе и предательстве в кругу ученых', '978-5-17-000024-0', '/uploads/covers/1.jpg'],
            ['Книга 25', 2005, 'Психологический роман о семье и личных тайнах', '978-5-17-000025-0', '/uploads/covers/2.jpg'],
            ['Книга 26', 2006, 'Детектив о загадочном исчезновении на старинной усадьбе', '978-5-17-000026-0', '/uploads/covers/3.jpg'],
            ['Книга 27', 2007, 'Приключенческий роман о поисках сокровищ на далёких островах', '978-5-17-000027-0', '/uploads/covers/1.jpg'],
            ['Книга 28', 2008, 'Историческая драма о великих событиях XX века', '978-5-17-000028-0', '/uploads/covers/2.jpg'],
            ['Книга 29', 2009, 'Сатирическая повесть о жизни в маленьком провинциальном городке', '978-5-17-000029-0', '/uploads/covers/3.jpg'],
            ['Книга 30', 2010, 'Философская история о путешествии души и поисках истины', '978-5-17-000030-0', '/uploads/covers/1.jpg'],
            ['Книга 31', 2011, 'Современный любовный роман с неожиданными поворотами', '978-5-17-000031-0', '/uploads/covers/2.jpg'],
            ['Книга 32', 2012, 'Фантастический роман о роботе, который ищет человечность', '978-5-17-000032-0', '/uploads/covers/3.jpg'],
            ['Книга 33', 2013, 'История взросления и принятия трудных решений', '978-5-17-000033-0', '/uploads/covers/1.jpg'],
            ['Книга 34', 2014, 'Роман о загадочном острове, полном тайн и приключений', '978-5-17-000034-0', '/uploads/covers/2.jpg'],
            ['Книга 35', 2015, 'Триллер о секретной организации и опасных миссиях', '978-5-17-000035-0', '/uploads/covers/3.jpg'],
            ['Книга 36', 2016, 'Роман о силе дружбы и преодолении внутренних страхов', '978-5-17-000036-0', '/uploads/covers/1.jpg'],
            ['Книга 37', 2017, 'Современная мистическая история о проклятии и любви', '978-5-17-000037-0', '/uploads/covers/2.jpg'],
            ['Книга 38', 2018, 'Роман о глобальных переменах и личной трансформации героя', '978-5-17-000038-0', '/uploads/covers/3.jpg'],
            ['Книга 39', 2019, 'Детективная сага о расследовании громких преступлений', '978-5-17-000039-0', '/uploads/covers/1.jpg'],
            ['Книга 40', 2020, 'Философская повесть о смысле жизни и хрупкости счастья', '978-5-17-000040-0', '/uploads/covers/2.jpg'],
        ];

        $authors = range(1, 20);

        foreach ($books as $book) {
            $this->insert('{{%book}}', [
                'title' => $book[0],
                'year' => $book[1],
                'description' => $book[2],
                'isbn' => $book[3],
                'cover' => $book[4],
                'created_at' => $time,
                'updated_at' => $time,
            ]);

            $bookId = $this->db->getLastInsertID();

            $numAuthors = rand(1, 3);
            $assignedAuthors = (array)array_rand(array_flip($authors), $numAuthors);

            $rows = [];
            foreach ($assignedAuthors as $authorId) {
                $rows[] = [$authorId, $bookId];
            }

            $this->batchInsert('{{%author_book}}', ['author_id', 'book_id'], $rows);
        }
    }

    public function safeDown()
    {
    }
}
